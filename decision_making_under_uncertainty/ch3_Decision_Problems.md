# ch3 Decision Problems
上一章主要讲了不确定性和使用概率模型的推理，这一章主要是如何基于概率模型和效用函数做出合理的决策

## 1. 效用理论Utility Theory
彩票抽奖：每个行动为抽一张彩票，可能结果为$S_{1:n}$，其发生的概率分别为$p_{1:n}$的一次抽奖记为$[S_1:p_1, ..., S_n: p_n$
上面来自课件，书上是这么说的：一个lottery是一系列的概率和这些概率对应的状态的集合，例如$[S_1:p_1, ..., S_n: p_n$

### 1. Constrains on Rational Preferences 理性偏好
偏好：比较两种不同结果的渴求程度
满足一些约束，称为冯诺依曼-摩根斯坦公理
1. Completeness，完整性，一定为$A>B, B>A, A=B$中的一种，主要是说agent不能回避决策
2. Transitivity
3. Continuity，如果$A\geq C\geq B$，则存在概率p使得$[A:p;C:1-p]=C$，我感觉意思是存在p为特定值，使得在情况一：以p概率发生A和1-p概率发生B，和情况二必定发生C，得到的期望收益相同
4. Independence

违背任意一条约束，则会在某些情况下表现出不理性行为

### 2. 效用函数
理性偏好的限制条件，使得我们可以用一个实值函数来表示我们的偏好
实值函数有一些性质$U(A)>U(B)$当且仅当$A>B$，$U(A)=U(B)$当且仅当$A=B$
效用函数不是唯一的，两个效用函数如果可以互相通过仿射变换得到，则agent的行为在这两个效用函数下是相同的
一次抽奖的效用定义为：$U([S_1:p_1; ...; S_n: p_n])=\sum_{i=1}^np_iU(S_i)$

获得一个合适的效用函数比获得一个概率模型更难

### 3. 最大期望的效用准则 Maximun Expected Utility Principle
1. 假设我们有一个概率模型$P(s'|o, a)$，观察为o时，采取行动a的期望概率为$EU(a|o)=\sum_{x'}P(s'|a, o)U(s')$，maximum expected utility principle(MEU)是说一个理性的agent应该采取使得期望效用最大的行动$$a*=argmax_aEU(a|o)$$
2。 但期望效用很难得到，我们通常使用的是真实期望效用的估计值，但即使估计值是无偏的，真实结果可能也比估计的差很多，也就是说我们的估计会乐观很多，这就是后决策失望现象
![20200325194318.png](https://raw.githubusercontent.com/s974534426/img_for_notes/master/20200325194318.png)

乐观者报应，最佳选项的估计期望效用会高于真实值的现象

### 4. Utility Elicitation
效用启发式：根据人的经验，推导出效用函数可能的形式，
归一化效用函数，最好的结果设为1，最坏的设为0.其他结果介于0和1之间

### 5. Utility of Money 货币效应
货币效应关于货币总量总是非线性的
圣彼得堡悖论

### 6. 多变量效用函数
如果直接给每一种变量组合设计一个效用值，那么需要设计的效用值的数量和变量数是指数增长的，所以需要利用变量间不同形式的独立性，压缩表示效用函数
#### 1. 偏好独立性
![20200325202222.png](https://raw.githubusercontent.com/s974534426/img_for_notes/master/20200325202222.png)
X中任意的两个变量的效用值的顺序不受到Y中变量的影响
如果效用变量集V中任意变量在>上都偏好独立于其补集，则称变量集V满足相互偏好独立性
偏好独立性并不是对称关系

#### 2. 加法效用函数
如果变量$X_{1:n}$是相互偏好独立的，那么可以使用单一变量的效用函数之和来表示一个多变量效用函数$U(x_{1:n})=\sum_{i=1}^nU(x_i)$，此时，只需要2n个值来指定效用函数
在图中，如果有多个效用函数，可以把他们相加，得到总效用值

#### 3. 效用独立性
![20200325211817.png](https://raw.githubusercontent.com/s974534426/img_for_notes/master/20200325211817.png)

#### 4. 乘法效用函数
![20200325212011.png](https://raw.githubusercontent.com/s974534426/img_for_notes/master/20200325212011.png)
如果变量集V满足相互效用独立性，则效用函数U(V)可以表示为一个乘法效用函数
呈现相互效用独立性的n变量问题可以用n个单一变量效用函数和n个常数建模

### 7. 不合理性
讲了人决策时的一些不合理性的例子
确定性效应：人们被确定性的收益高度吸引
表达效应：一个决策问题的措辞对agent的选择有很大影响
锚效应：人们喜欢相对评价而不愿进行绝对评价

## 2. Decision Network
决策网络是贝叶斯网络加上行动和效用
决策网络中有三种节点
- chance node，表示一个随机变量，图中用圆圈表示
- decision node，表示决策，用方形表示
- utility node，表示效用部分，用菱形表示

有三种有向边
- conditional edge，被指向的节点的不确定性与他的父节点有关，即条件概率
- informational edge，指向decision node，表示这个决策是根据他的父节点做出的，有时省略不写
- functional edge，指向utility node，表明效用是根据他的父节点计算的

同样，决策网络不能有环

### 1. Evaluating Decision Networks
之后可以计算图中效用点的值，计算时，需要用到各个行动的概率，这个概率可以用前一章中任意的方法计算
![20200325210201.png](https://raw.githubusercontent.com/s974534426/img_for_notes/master/20200325210201.png)

### 2. Value of Information 信息价值
1. 一条信息的价值：获取该信息之后和之前的最优行动的期望价值之间的差
2. 信息价值理论：
   - 使得agent能够选择要获得什么信息
   - 涉及序贯决策的一种简化形式，即观察行动只影响agent的信念状态，而不是外在物理状态

3. 信息价值的通用公式
![20200403080528](https://raw.githubusercontent.com/s974534426/Img_for_notes/master/20200403080528.png)
![20200403081358](https://raw.githubusercontent.com/s974534426/Img_for_notes/master/20200403081358.png)

4. 信息价值的属性
- 信息的期望价值是非负的，这个可以从定义直接得到
$$VOI(O_j|o)\geq 0,\ \forall o, O_j$$
但这是针对期望价值，不是真实价值
- 信息价值是不可累加的
- 信息价值独立于次序

1. 信息收集的成本
信息价值仅捕获观察一个变量后期望效用的增益，实际上需要花费成本来获得一个变量的观察
所以在选择测试方案时，既要考虑信息价值，也要考虑测试成本。

6. 信息收集agent实现
![20200403082048](https://raw.githubusercontent.com/s974534426/Img_for_notes/master/20200403082048.png)
这个过程是贪心的，不一定获得最好的序贯决策

## 3. 专家系统
### 1. 概述
1. 什么是专家系统
![20200403082954](https://raw.githubusercontent.com/s974534426/Img_for_notes/master/20200403082954.png)
2. 要素
   - 具备某个领域专家级的知识(知识库)
   - 能够模拟专家的思维(推理)
   - 达到专家级的解题水平(推理的全面和准确)

3. 知识工程
建造一个专家系统的过程，把软件工程的思想应用于设计基于知识的系统
包括4个方面
- 知识获取
- 知识表示
- 软件设计
- 编程实现

4. 发展史
。。。。。。

5. 专家系统的特点
   - 启发性，可以进行推理判断决策
   - 透明性，可以解释推理过程和回答过程
   - 灵活性，可以不断增长知识，修改知识，不断更新，知识库和推理机独立又有联系

6. 专家系统的类型
   - 解释专家系统，通过对已有信息和数据分析和解释，确定他们的含义。如化学结构分析
   - 预测专家系统，如恶劣天气预报
   - 诊断专家系统，如肝功能检测
   - 设计专家系统，大规模集成电路设计
   - 规划专家系统，机器人规划
   - 监视专家系统，核电站安全监视
   - 控制专家系统，生产质量控制，怎么感觉和规划专家系统差不多。。。
   - 教学专家系统
   - 决策专家系统，引入决策网络，推荐能反映出agent偏好和可得到的证据的最优决策

### 2. 专家系统的结构
![20200403084812](https://raw.githubusercontent.com/s974534426/Img_for_notes/master/20200403084812.png)
- 知识获取机构：建立、修改、扩充知识库
- 人机接口
- 数据库，反映了当前问题求解状态的集合，存放初始状态，中间结果，最终结论
TODO

### 3. 决策专家系统


## 4. 单步博弈(感觉一些概念有点难)
### 1. 策略
一个agent的策略分为
- 纯策略，行动选择是确定的
- 混合策略，行动选择是概率性的

### 2. 最优反应

### 3. 占优策略
不管对方使用什么策略，我都是最优策略

### 4. 纳什均衡
主要是如何判断效用矩阵中哪个点是纳什均衡点
碰撞博弈

### 5. 行为博弈理论
对率k层模型
